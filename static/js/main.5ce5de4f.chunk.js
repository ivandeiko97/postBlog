(window["webpackJsonptest-blog"]=window["webpackJsonptest-blog"]||[]).push([[0],{30:function(e,t,a){e.exports=a(45)},35:function(e,t,a){},40:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),s=a(18),r=a.n(s),c=(a(35),a(7)),l=a(17),i=a(8),d=a(15),u=a(27);a(40);function p(e){var t=e.children;return o.a.createElement("div",null,o.a.createElement("header",{className:"header"},o.a.createElement("nav",{className:"header-nav"},o.a.createElement("ul",{className:"header-list"},o.a.createElement("li",{className:"header-li"},o.a.createElement(i.b,{to:"/",className:"header-link"},"Posts")),o.a.createElement("li",{className:"header-li"},o.a.createElement(i.b,{to:"/add",className:"header-link"},"Add Posts"))))),o.a.createElement("main",null,t))}var m="LOAD_POSTS",h="LOAD_POST";function b(){return function(e){fetch("https://bloggy-api.herokuapp.com/posts").then((function(e){return e.json()})).then((function(t){return e({type:m,posts:t})}))}}function v(e){return function(t){fetch("https://bloggy-api.herokuapp.com/posts/".concat(e,"?_embed=comments")).then((function(e){return e.json()})).then((function(e){return t({type:h,post:e})}))}}var f={posts:null,viewedPost:null};var y=a(10),E=a(11),N=a(13),g=a(12),k=a(14);function O(e,t,a){fetch("https://bloggy-api.herokuapp.com/posts/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(t){return a(e)}))}function S(e){var t=e.text,a=e.input,n=e.onSave,s=e.onClose;return o.a.createElement("div",{className:"post-inputWrapper"},o.a.createElement("input",{type:"text",className:"post-input","data-editinput":a,defaultValue:t}),o.a.createElement("div",{className:"post-control"},o.a.createElement("button",{onClick:function(e){return n(e)},"data-save":a,className:"post-save"},"save"),o.a.createElement("button",{onClick:s,"data-close":a,className:"post-close"},"close")))}a(42);var w=function(e){function t(){var e,a;Object(y.a)(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(a=Object(N.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(o)))).state={editTitle:!1,editBody:!1,title:a.props.title,body:a.props.body},a.changeEditMode=function(e){var t=e.target;if(void 0!==t.dataset.edit)switch(t.dataset.edit){case"title":a.setState({editTitle:!0});break;case"body":a.setState({editBody:!0})}},a.deleteHandler=function(){fetch("https://bloggy-api.herokuapp.com/posts/".concat(a.props.id),{method:"DELETE"}).then((function(e){return a.props.load()}))},a.changeHandler=function(e){var t=e.target;switch(t.dataset.editinput){case"title":a.setState({title:t.value});break;case"body":a.setState({body:t.value})}},a.closeHandler=function(e){switch(e.target.dataset.close){case"title":a.setState({editTitle:!1});break;case"body":a.setState({editBody:!1})}},a.saveHandler=function(e){var t=e.target,n=a.state,o=n.title,s=n.body,r=a.props,c=r.id,l=r.load,i={title:o,body:s};switch(t.dataset.save){case"title":O(c,i,l),a.setState({editTitle:!1});break;case"body":O(c,i,l),a.setState({editBody:!1})}},a}return Object(k.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this.state,t=e.title,a=e.body,n=e.editTitle,s=e.editBody;return o.a.createElement("section",{onClick:this.changeEditMode,onChange:this.changeHandler,className:"post"},o.a.createElement("span",{onClick:this.deleteHandler,className:"post-delete"},"\xd7"),n?o.a.createElement(S,{text:t,input:"title",onSave:this.saveHandler,onClose:this.closeHandler}):o.a.createElement("h1",{className:"post-title"},t,o.a.createElement("span",{"data-edit":"title",className:"post-edit"}," edit")),s?o.a.createElement(S,{text:a,input:"body",onSave:this.saveHandler,onClose:this.closeHandler}):o.a.createElement("p",{className:"post-body"},a,o.a.createElement("span",{"data-edit":"body",className:"post-edit"}," edit")),o.a.createElement(i.b,{to:"/posts/".concat(this.props.id,"/"),className:"post-view"},"View details"))}}]),t}(n.Component);var j=Object(c.b)((function(e,t){var a=t.post;return{title:a.title,body:a.body,id:a.id}}),(function(e){return{load:function(){return e(b())}}}))(w),C=function(e){function t(){return Object(y.a)(this,t),Object(N.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(k.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){this.props.load()}},{key:"render",value:function(){var e=this.props.posts;return e?o.a.createElement("div",null,e.map((function(e){return o.a.createElement(j,{key:e.id,post:e})}))):o.a.createElement("div",{className:"preloader"},o.a.createElement("div",{className:"preloader-1"}),o.a.createElement("div",{className:"preloader-2"}),o.a.createElement("div",{className:"preloader-3"}))}}]),t}(n.Component);var H=Object(c.b)((function(e){return{posts:e.posts}}),(function(e){return{load:function(){return e(b())}}}))(C),T=a(29);function P(e){var t=e.comment;return o.a.createElement("section",null,o.a.createElement("h1",null,"Anonym"),o.a.createElement("p",null,t.body))}var B=Object(c.b)((function(e,t){return{comments:t.comments,postId:t.postId}}),(function(e){return{load:function(t){return e(v(t))}}}))((function(e){var t=e.comments,a=e.postId,s=e.load,r=Object(n.useState)(""),c=Object(T.a)(r,2),l=c[0],i=c[1],d=o.a.createRef();return o.a.createElement("div",{className:"commentList"},0===t.length?o.a.createElement("p",{className:"commentList-noCom"},"No cooments"):t.map((function(e){return o.a.createElement(P,{key:e.id,comment:e})})),o.a.createElement("div",{className:"commentList-addWrapper"},o.a.createElement("textarea",{className:"commentList-textarea",ref:d,defaultValue:l,placeholder:"comment write here",onChange:function(e){var t=e.target;i(t.value)}}),o.a.createElement("button",{className:"commentList-add",onClick:function(){var e={body:l,postId:+a};fetch("https://bloggy-api.herokuapp.com/comments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){return s(a)})),d.current.value="",i("")},disabled:""===l.trim()},"Add Comment")))})),x=function(e){function t(){var e,a;Object(y.a)(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(a=Object(N.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(o)))).state={editTitle:!1,editBody:!1,title:null,body:null,deleted:!1},a.changeEditMode=function(e){var t=e.target;if(void 0!==t.dataset.edit)switch(t.dataset.edit){case"title":a.setState({editTitle:!0});break;case"body":a.setState({editBody:!0})}},a.changeHandler=function(e){var t=e.target;switch(t.dataset.editinput){case"title":a.setState({title:t.value});break;case"body":a.setState({body:t.value})}},a.deleteHandler=function(){fetch("https://bloggy-api.herokuapp.com/posts/".concat(a.props.id),{method:"DELETE"}),a.setState({deleted:!0})},a.closeHandler=function(e){switch(e.target.dataset.close){case"title":a.setState({editTitle:!1});break;case"body":a.setState({editBody:!1})}},a.saveHandler=function(e){var t=e.target,n=a.state,o=n.title,s=n.body,r=a.props,c=r.id,l=r.load,i={title:o,body:s};switch(t.dataset.save){case"title":O(c,i,l),a.setState({editTitle:!1});break;case"body":O(c,i,l),a.setState({editBody:!1})}},a}return Object(k.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){this.props.load(this.props.id)}},{key:"componentWillReceiveProps",value:function(e){this.setState({title:e.viewedPost.title,body:e.viewedPost.body})}},{key:"render",value:function(){var e=this.state,t=e.title,a=e.body,n=e.editTitle,s=e.editBody,r=e.deleted,c=this.props,l=c.viewedPost,d=c.id;return l&&!r?o.a.createElement("section",{onClick:this.changeEditMode,onChange:this.changeHandler,className:"post"},o.a.createElement("span",{onClick:this.deleteHandler,className:"post-delete"},"\xd7"),n?o.a.createElement(S,{text:t,input:"title",onSave:this.saveHandler,onClose:this.closeHandler}):o.a.createElement("h1",{className:"post-title"},t,o.a.createElement("span",{"data-edit":"title",className:"post-edit"}," edit")),s?o.a.createElement(S,{text:a,input:"body",onSave:this.saveHandler,onClose:this.closeHandler}):o.a.createElement("p",{className:"post-body"},a,o.a.createElement("span",{"data-edit":"body",className:"post-edit"}," edit")),o.a.createElement(B,{comments:l.comments,postId:d})):r?o.a.createElement("div",{className:"deleted"},o.a.createElement("h1",{className:"deleted-message"},"This post is deleted"),o.a.createElement(i.b,{to:"/",className:"deleted-back"},"Back to posts")):o.a.createElement("div",{className:"preloader"},o.a.createElement("div",{className:"preloader-1"}),o.a.createElement("div",{className:"preloader-2"}),o.a.createElement("div",{className:"preloader-3"}))}}]),t}(n.Component);var I=Object(c.b)((function(e,t){return{viewedPost:e.viewedPost,id:t.match.params.id}}),(function(e){return{load:function(t){return e(v(t))}}}))(x),A=(a(43),function(e){function t(){var e,a;Object(y.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(N.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(s)))).state={title:"",body:"",error:!1,added:!1},a.titleInput=o.a.createRef(),a.bodyInput=o.a.createRef(),a.inputHandler=function(e){var t=e.target;switch(t.dataset.addinput){case"title":a.setState({title:t.value});break;case"body":a.setState({body:t.value})}},a.clickHandler=function(){a.setState({added:!1})},a.addHandler=function(){var e=a.state,t=e.title,n=e.body;if(""!==t.trim()&&""!==n.trim()){var o={title:t,body:n};fetch("https://bloggy-api.herokuapp.com/posts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}),a.titleInput.current.value="",a.bodyInput.current.value="",a.setState({body:"",value:"",error:!1,added:!0})}else a.setState({error:!0})},a}return Object(k.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this.state,t=e.title,a=e.body,n=e.error,s=e.added;return o.a.createElement("section",{className:"add"},o.a.createElement("div",{className:"".concat(s?"addedPost":"hidden")},o.a.createElement("p",{className:"added-p"},"Post is added"),o.a.createElement("button",{onClick:this.clickHandler,className:"added-ok"},"Ok")),o.a.createElement("form",{className:"add-form",onChange:this.inputHandler},o.a.createElement("input",{type:"text",className:"add-input ".concat(n&&""===t.trim()?"error":""),"data-addinput":"title",placeholder:"title",defaultValue:t,ref:this.titleInput}),o.a.createElement("input",{type:"text",className:"add-input ".concat(n&&""===a.trim()?"error":""),"data-addinput":"body",placeholder:"body",ref:this.bodyInput,defaultValue:a})),o.a.createElement("button",{onClick:this.addHandler,className:"add-btn"},"Add"))}}]),t}(n.Component)),L=(a(44),Object(l.c)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return{posts:t.posts};case h:return{viewedPost:t.post};default:return e}}),Object(l.a)(u.a)));var D=function(){return o.a.createElement(c.a,{store:L},o.a.createElement(i.a,null,o.a.createElement(p,null,o.a.createElement(d.c,null,o.a.createElement(d.a,{exact:!0,path:"/",component:H}),o.a.createElement(d.a,{path:"/add",component:A}),o.a.createElement(d.a,{path:"/posts/:id/",component:I})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(D,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[30,1,2]]]);
//# sourceMappingURL=main.5ce5de4f.chunk.js.map